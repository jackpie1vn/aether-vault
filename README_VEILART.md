# VeilArt - Privacy-Preserving Art Contest Platform

VeilArt æ˜¯ä¸€ä¸ªåŸºäº Zama FHE (å…¨åŒæ€åŠ å¯†) æŠ€æœ¯çš„éšç§ä¿æŠ¤è‰ºæœ¯è¯„é€‰å¹³å°ã€‚æ‰€æœ‰è¯„åˆ†å’ŒæŠ•ç¥¨æ•°æ®éƒ½åœ¨é“¾ä¸ŠåŠ å¯†å­˜å‚¨ï¼Œç¡®ä¿æŠ•ç¥¨è¿‡ç¨‹çš„å…¬å¹³æ€§å’Œéšç§æ€§ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **éšç§ä¿æŠ¤æŠ•ç¥¨**: ä½¿ç”¨ FHE æŠ€æœ¯åŠ å¯†è¯„åˆ†å’ŒæŠ•ç¥¨æ•°æ®
- **å¤šç±»åˆ«ç«èµ›**: æ”¯æŒä½œå“åœ¨å¤šä¸ªç±»åˆ«ä¸­å‚èµ›
- **æƒé™æ§åˆ¶**: åŸºäº ACL çš„è§£å¯†æƒé™ç®¡ç†
- **å»ä¸­å¿ƒåŒ–å­˜å‚¨**: ä½œå“æ–‡ä»¶å­˜å‚¨åœ¨ IPFS
- **å®æ—¶æ’è¡Œæ¦œ**: åŠ¨æ€å±•ç¤ºå„ç±»åˆ«æ’å

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **æ¡†æ¶**: React 18 + TypeScript + Vite
- **UI**: Shadcn/ui + Tailwind CSS
- **Web3**: Ethers.js v6
- **FHE SDK**: @zama-fhe/relayer-sdk@0.2.0

### æ™ºèƒ½åˆçº¦
- **è¯­è¨€**: Solidity 0.8.27
- **FHE åº“**: @fhevm/solidity@0.8.0
- **å¼€å‘å·¥å…·**: Hardhat 2.22+
- **ç½‘ç»œ**: Sepolia Testnet

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+
- npm æˆ– yarn
- MetaMask é’±åŒ…
- Sepolia æµ‹è¯•ç½‘ ETH

### å®‰è£…

\`\`\`bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd veil-art-unveiled

# 2. å®‰è£…å‰ç«¯ä¾èµ–
npm install

# 3. å®‰è£…åˆçº¦ä¾èµ–
cd contract
npm install
cd ..

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘ .env.local å¡«å†™å¿…è¦çš„é…ç½®

# 5. éƒ¨ç½²åˆçº¦åˆ° Sepolia
cd contract
npm run deploy
# è®°å½•åˆçº¦åœ°å€å¹¶æ›´æ–°åˆ° .env.local

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd ..
npm run dev
\`\`\`

### è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- [å®Œæ•´éƒ¨ç½²æŒ‡å—](./DEPLOYMENT.md) - è¯¦ç»†çš„éƒ¨ç½²æ­¥éª¤å’Œæ•…éšœæ’æŸ¥
- [FHE å¼€å‘æŒ‡å—](./FHE_COMPLETE_GUIDE_FULL_CN(1).md) - Zama FHE å®Œæ•´å¼€å‘å‚è€ƒ

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æäº¤ä½œå“

```typescript
// ç”¨æˆ·æäº¤è‰ºæœ¯ä½œå“
await submitEntry(
  title,           // ä½œå“æ ‡é¢˜
  descriptionHash, // IPFS æè¿°å“ˆå¸Œ
  fileHash,        // IPFS æ–‡ä»¶å“ˆå¸Œ
  tags,            // æ ‡ç­¾æ•°ç»„
  categories       // å‚èµ›ç±»åˆ«æ•°ç»„
);
```

### 2. è¯„åˆ†ï¼ˆåŠ å¯†ï¼‰

```typescript
// ä¸ºä½œå“è¯„åˆ†ï¼Œè®¡æ•°å™¨åœ¨é“¾ä¸ŠåŠ å¯†æ›´æ–°
await scoreEntry(entryId);
```

### 3. æŠ•ç¥¨ï¼ˆæŒ‰ç±»åˆ«ï¼ŒåŠ å¯†ï¼‰

```typescript
// ä¸ºç‰¹å®šç±»åˆ«æŠ•ç¥¨
await voteForEntry(entryId, category);
```

### 4. è§£å¯†æ•°æ®ï¼ˆéœ€è¦æƒé™ï¼‰

```typescript
// åªæœ‰å‚èµ›è€…å¯ä»¥è§£å¯†è‡ªå·±ä½œå“çš„æ•°æ®
const value = await decryptHandle(
  handle,          // åŠ å¯†å¥æŸ„
  contractAddress, // åˆçº¦åœ°å€
  userAddress      // ç”¨æˆ·åœ°å€
);
```

## ğŸ”§ é¡¹ç›®ç»“æ„

\`\`\`
veil-art-unveiled/
â”œâ”€â”€ contract/               # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ veil.sol           # ArtContest åˆçº¦
â”‚   â”œâ”€â”€ scripts/deploy.ts  # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ hardhat.config.ts  # Hardhat é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ WalletConnect.tsx           # é’±åŒ…è¿æ¥
â”‚   â”‚   â”œâ”€â”€ ArtworkActions.tsx          # è¯„åˆ†/æŠ•ç¥¨æ“ä½œ
â”‚   â”‚   â””â”€â”€ EncryptedDataDisplay.tsx    # åŠ å¯†æ•°æ®æ˜¾ç¤º
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ useFHE.ts      # FHE SDK Hook
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ fhe.ts         # FHE åˆå§‹åŒ–å·¥å…·
â”‚   â”‚   â””â”€â”€ contract.ts    # åˆçº¦äº¤äº’å·¥å…·
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ contract-abi.ts # åˆçº¦ ABI
â”‚   â””â”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”œâ”€â”€ .env.local             # å‰ç«¯ç¯å¢ƒå˜é‡
â””â”€â”€ package.json
\`\`\`

## ğŸ”’ FHE éšç§ä¿æŠ¤åŸç†

### ä»€ä¹ˆæ˜¯å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰ï¼Ÿ

FHE å…è®¸åœ¨åŠ å¯†æ•°æ®ä¸Šç›´æ¥è¿›è¡Œè®¡ç®—ï¼Œç»“æœè§£å¯†åç­‰äºåœ¨æ˜æ–‡ä¸Šè®¡ç®—çš„ç»“æœï¼š

\`\`\`
ä¼ ç»Ÿæ–¹å¼:  è§£å¯† â†’ è®¡ç®— â†’ åŠ å¯†
FHEæ–¹å¼:   åŠ å¯†è®¡ç®—ï¼ˆæ— éœ€è§£å¯†ï¼‰
\`\`\`

### VeilArt ä¸­çš„åº”ç”¨

1. **åŠ å¯†è¯„åˆ†**:
   - ç”¨æˆ·è¯„åˆ†æ—¶ï¼Œåˆçº¦ç›´æ¥å¯¹åŠ å¯†è®¡æ•°å™¨ +1
   - æ— éœ€è§£å¯†ï¼Œä¿æŠ¤è¯„åˆ†éšç§

2. **åŠ å¯†æŠ•ç¥¨**:
   - æ¯ä¸ªç±»åˆ«ç»´æŠ¤ç‹¬ç«‹çš„åŠ å¯†è®¡æ•°å™¨
   - æŠ•ç¥¨è¿‡ç¨‹å®Œå…¨éšç§

3. **æƒé™æ§åˆ¶ (ACL)**:
   - åˆçº¦è‡ªåŠ¨æˆæƒè‡ªèº«å’Œå‚èµ›è€…
   - åªæœ‰è¢«æˆæƒçš„åœ°å€æ‰èƒ½è§£å¯†æ•°æ®

## ğŸ“Š Gas è´¹ç”¨å‚è€ƒ

åŸºäº Sepolia æµ‹è¯•ç½‘å®é™…æµ‹è¯•ï¼š

| æ“ä½œ | Gas æ¶ˆè€— | è´¹ç”¨ (ä¼°ç®—) |
|------|---------|------------|
| submitEntry | 200,000 - 300,000 | 0.001 - 0.003 ETH |
| scoreEntry | 80,000 - 150,000 | 0.0005 - 0.0015 ETH |
| voteEntry | 80,000 - 150,000 | 0.0005 - 0.0015 ETH |
| è§£å¯†ï¼ˆç­¾åï¼‰ | 0 | å…è´¹ |

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

```bash
# å‰ç«¯å¼€å‘
npm run dev         # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build       # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview     # é¢„è§ˆç”Ÿäº§æ„å»º

# åˆçº¦å¼€å‘
cd contract
npm run compile     # ç¼–è¯‘åˆçº¦
npm run deploy      # éƒ¨ç½²åˆ° Sepolia
npm run test        # è¿è¡Œæµ‹è¯•
```

## ğŸ§ª æµ‹è¯•æµç¨‹

1. **è¿æ¥é’±åŒ…**: ç‚¹å‡»"è¿æ¥é’±åŒ…"å¹¶åˆ‡æ¢åˆ° Sepolia
2. **ç­‰å¾… FHE åˆå§‹åŒ–**: è§‚å¯Ÿ"FHE SDK å·²å°±ç»ª"æ ‡è¯†
3. **æäº¤ä½œå“**: å¡«å†™è¡¨å•å¹¶æäº¤
4. **è¯„åˆ†**: ç»™ä½œå“è¯„åˆ†ï¼ˆæ¶ˆè€—å°‘é‡ Gasï¼‰
5. **æŠ•ç¥¨**: é€‰æ‹©ç±»åˆ«å¹¶æŠ•ç¥¨
6. **è§£å¯†**: ä½œä¸ºå‚èµ›è€…ï¼Œè§£å¯†æŸ¥çœ‹çœŸå®æ•°æ®

## ğŸ› å¸¸è§é—®é¢˜

### Q: FHE SDK åˆå§‹åŒ–å¤±è´¥ï¼Ÿ

ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å¯¼å…¥è·¯å¾„ï¼š
```typescript
import { initSDK, createInstance } from '@zama-fhe/relayer-sdk/bundle';
```

### Q: äº¤æ˜“ä¸€ç›´ pendingï¼Ÿ

- æ£€æŸ¥ Sepolia ç½‘ç»œçŠ¶æ€
- ç¡®è®¤è´¦æˆ·æœ‰è¶³å¤Ÿçš„ ETH
- å¯åœ¨ MetaMask ä¸­åŠ é€Ÿäº¤æ˜“

### Q: æ— æ³•è§£å¯†æ•°æ®ï¼Ÿ

- ç¡®è®¤ä½ æ˜¯ä½œå“çš„å‚èµ›è€…
- æ£€æŸ¥ FHE SDK æ˜¯å¦å·²åˆå§‹åŒ–
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

## ğŸ“š å‚è€ƒèµ„æ–™

- [Zama FHE å®˜æ–¹æ–‡æ¡£](https://docs.zama.ai/)
- [fhEVM Solidity åº“](https://github.com/zama-ai/fhevm)
- [Ethers.js v6 æ–‡æ¡£](https://docs.ethers.org/v6/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ï¼Œè¯·è¿›è¡Œå……åˆ†çš„å®‰å…¨å®¡è®¡ã€‚

Built with â¤ï¸ using Zama FHE Technology
